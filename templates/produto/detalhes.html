{% extends 'base.html' %}

{% block titulo_conteudo %} Detalhes do Produto {% endblock %}

{% block conteudo %}
<div class="mb-3">
    <label class="form-label">ID:</label>
    <input type="text" class="form-control" value="{{ item.id }}" readonly>
</div>

<div class="mb-3">
    <label class="form-label">Nome do Produto:</label>
    <input type="text" class="form-control" value="{{ item.nome }}" readonly>
</div>

<div class="mb-3">
    <label class="form-label">Pre√ßo:</label>
    <input type="text" class="form-control" value="{{ item.preco_formatado }}" readonly>
</div>

<div class="mb-3">
    <label class="form-label">Categoria:</label>
    <input type="text" class="form-control" value="{{ item.categoria.nome }}" readonly>
</div>

{% if item.img_base64 %}
<div class="mb-3">
    <label class="form-label">Imagem:</label><br>
    <canvas class="canvas" id="imageCanvasDetail" width="200" height="200"></canvas>
    <input type="hidden" id="img_data" value="{{ item.img_base64 }}">
</div>
{% endif %}

<hr>

<div class="mt-4">
    <a href="{% url 'editar_produto' item.id %}" class="btn btn-warning">
        <i class="fas fa-edit"></i> Editar
    </a>
    <a href="{% url 'produto' %}" class="btn btn-secondary">
        <i class="fas fa-arrow-left"></i> Voltar para Listagem
    </a>
</div>
{% endblock %}

{% block javascript %}
<script>
    $(document).ready(function() {
        const imgBase64 = $('#img_data').val();
        if (imgBase64) {
            loadImage(imgBase64, 'imageCanvasDetail');
        }
    });
</script>
{% endblock %}